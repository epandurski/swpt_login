/**
 * Minified by jsDelivr using Terser v5.39.0.
 * Original file: /gh/altcha-org/altcha@main/dist/altcha.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var Ri=Object.defineProperty,Vr=e=>{throw TypeError(e)},Ii=(e,t,n)=>t in e?Ri(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,le=(e,t,n)=>Ii(e,"symbol"!=typeof t?t+"":t,n),Br=(e,t,n)=>t.has(e)||Vr("Cannot "+n),G=(e,t,n)=>(Br(e,t,"read from private field"),n?n.call(e):t.get(e)),Vt=(e,t,n)=>t.has(e)?Vr("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Bt=(e,t,n,r)=>(Br(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);const ln='(function(){"use strict";const d=new TextEncoder;function p(e){return[...new Uint8Array(e)].map(t=>t.toString(16).padStart(2,"0")).join("")}async function b(e,t,r){if(typeof crypto>"u"||!("subtle"in crypto)||!("digest"in crypto.subtle))throw new Error("Web Crypto is not available. Secure context is required (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).");return p(await crypto.subtle.digest(r.toUpperCase(),d.encode(e+t)))}function w(e,t,r="SHA-256",n=1e6,s=0){const o=new AbortController,a=Date.now();return{promise:(async()=>{for(let c=s;c<=n;c+=1){if(o.signal.aborted)return null;if(await b(t,c,r)===e)return{number:c,took:Date.now()-a}}return null})(),controller:o}}function h(e){const t=atob(e),r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);return r}function g(e,t=12){const r=new Uint8Array(t);for(let n=0;n<t;n++)r[n]=e%256,e=Math.floor(e/256);return r}async function m(e,t="",r=1e6,n=0){const s="AES-GCM",o=new AbortController,a=Date.now(),l=async()=>{for(let u=n;u<=r;u+=1){if(o.signal.aborted||!c||!y)return null;try{const f=await crypto.subtle.decrypt({name:s,iv:g(u)},c,y);if(f)return{clearText:new TextDecoder().decode(f),took:Date.now()-a}}catch{}}return null};let c=null,y=null;try{y=h(e);const u=await crypto.subtle.digest("SHA-256",d.encode(t));c=await crypto.subtle.importKey("raw",u,s,!1,["decrypt"])}catch{return{promise:Promise.reject(),controller:o}}return{promise:l(),controller:o}}let i;onmessage=async e=>{const{type:t,payload:r,start:n,max:s}=e.data;let o=null;if(t==="abort")i==null||i.abort(),i=void 0;else if(t==="work"){if("obfuscated"in r){const{key:a,obfuscated:l}=r||{};o=await m(l,a,s,n)}else{const{algorithm:a,challenge:l,salt:c}=r||{};o=w(l,c,a,s,n)}i=o.controller,o.promise.then(a=>{self.postMessage(a&&{...a,worker:!0})})}}})();\n',qr=typeof self<"u"&&self.Blob&&new Blob([ln],{type:"text/javascript;charset=utf-8"});function Si(e){let t;try{if(t=qr&&(self.URL||self.webkitURL).createObjectURL(qr),!t)throw"";const n=new Worker(t,{name:null==e?void 0:e.name});return n.addEventListener("error",(()=>{(self.URL||self.webkitURL).revokeObjectURL(t)})),n}catch{return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(ln),{name:null==e?void 0:e.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const Ti="5";var an;typeof window<"u"&&((an=window.__svelte??(window.__svelte={})).v??(an.v=new Set)).add(Ti);const Ni=1,Li=4,Di=8,Pi=16,Oi=1,Fi=2,zt="[",sn="[!",fn="]",Je={},Z=Symbol(),Mi="http://www.w3.org/1999/xhtml",Hr=!1;function un(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}var cn=Array.isArray,Ui=Array.prototype.indexOf,ji=Array.from,yt=Object.keys,Et=Object.defineProperty,Oe=Object.getOwnPropertyDescriptor,Vi=Object.getOwnPropertyDescriptors,Bi=Object.prototype,qi=Array.prototype,dn=Object.getPrototypeOf,Wr=Object.isExtensible;function hn(e){for(var t=0;t<e.length;t++)e[t]()}const fe=2,vn=4,It=8,Xt=16,be=32,Me=64,xt=128,ee=256,$t=512,K=1024,he=2048,Ue=4096,Ke=8192,St=16384,Hi=32768,Qt=65536,Wi=1<<19,gn=1<<20,Ht=1<<21,ut=Symbol("$state"),_n=Symbol("legacy props"),Yi=Symbol("");function Gi(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Zi(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Ji(e){throw new Error("https://svelte.dev/e/effect_orphan")}function Ki(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function zi(){throw new Error("https://svelte.dev/e/hydration_failed")}function Xi(e){throw new Error("https://svelte.dev/e/props_invalid_value")}function Qi(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function eo(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function to(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Tt(e){console.warn("https://svelte.dev/e/hydration_mismatch")}let P,L=!1;function Ze(e){L=e}function Re(e){if(null===e)throw Tt(),Je;return P=e}function ze(){return Re(Te(P))}function z(e){if(L){if(null!==Te(P))throw Tt(),Je;P=e}}function ro(){for(var e=0,t=P;;){if(8===t.nodeType){var n=t.data;if(n===fn){if(0===e)return t;e-=1}else(n===zt||n===sn)&&(e+=1)}var r=Te(t);t.remove(),t=r}}let no=!1;function ke(e){if("object"!=typeof e||null===e||ut in e)return e;const t=dn(e);if(t!==Bi&&t!==qi)return e;var n=new Map,r=cn(e),o=J(0),i=R,a=e=>{var t=R;ve(i);var n=e();return ve(t),n};return r&&n.set("length",J(e.length)),new Proxy(e,{defineProperty(e,t,r){(!("value"in r)||!1===r.configurable||!1===r.enumerable||!1===r.writable)&&Qi();var o=n.get(t);return void 0===o?(o=a((()=>J(r.value))),n.set(t,o)):D(o,a((()=>ke(r.value)))),!0},deleteProperty(e,t){var i=n.get(t);if(void 0===i)t in e&&(n.set(t,a((()=>J(Z)))),qt(o));else{if(r&&"string"==typeof t){var l=n.get("length"),s=Number(t);Number.isInteger(s)&&s<l.v&&D(l,s)}D(i,Z),qt(o)}return!0},get(t,r,o){var i;if(r===ut)return e;var l=n.get(r),s=r in t;if(void 0===l&&(!s||null!=(i=Oe(t,r))&&i.writable)&&(l=a((()=>J(ke(s?t[r]:Z)))),n.set(r,l)),void 0!==l){var u=c(l);return u===Z?void 0:u}return Reflect.get(t,r,o)},getOwnPropertyDescriptor(e,t){var r=Reflect.getOwnPropertyDescriptor(e,t);if(r&&"value"in r){var o=n.get(t);o&&(r.value=c(o))}else if(void 0===r){var i=n.get(t),a=null==i?void 0:i.v;if(void 0!==i&&a!==Z)return{enumerable:!0,configurable:!0,value:a,writable:!0}}return r},has(e,t){var r;if(t===ut)return!0;var o=n.get(t),i=void 0!==o&&o.v!==Z||Reflect.has(e,t);if((void 0!==o||null!==I&&(!i||null!=(r=Oe(e,t))&&r.writable))&&(void 0===o&&(o=a((()=>J(i?ke(e[t]):Z))),n.set(t,o)),c(o)===Z))return!1;return i},set(e,t,i,l){var s,u=n.get(t),c=t in e;if(r&&"length"===t)for(var f=i;f<u.v;f+=1){var d=n.get(f+"");void 0!==d?D(d,Z):f in e&&(d=a((()=>J(Z))),n.set(f+"",d))}void 0===u?(!c||null!=(s=Oe(e,t))&&s.writable)&&(D(u=a((()=>J(void 0))),a((()=>ke(i)))),n.set(t,u)):(c=u.v!==Z,D(u,a((()=>ke(i)))));var v=Reflect.getOwnPropertyDescriptor(e,t);if(null!=v&&v.set&&v.set.call(l,i),!c){if(r&&"string"==typeof t){var h=n.get("length"),p=Number(t);Number.isInteger(p)&&p>=h.v&&D(h,p+1)}qt(o)}return!0},ownKeys(e){c(o);var t=Reflect.ownKeys(e).filter((e=>{var t=n.get(e);return void 0===t||t.v!==Z}));for(var[r,i]of n)i.v!==Z&&!(r in e)&&t.push(r);return t},setPrototypeOf(){eo()}})}function qt(e,t=1){D(e,e.v+t)}var Yr,mn,wn,pn;function Wt(){if(void 0===Yr){Yr=window,mn=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;wn=Oe(t,"firstChild").get,pn=Oe(t,"nextSibling").get,Wr(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),Wr(n)&&(n.__t=void 0)}}function er(e=""){return document.createTextNode(e)}function ae(e){return wn.call(e)}function Te(e){return pn.call(e)}function X(e,t){if(!L)return ae(e);var n=ae(P);return null===n&&(n=P.appendChild(er())),Re(n),n}function Gr(e,t){if(!L){var n=ae(e);return n instanceof Comment&&""===n.data?Te(n):n}return P}function we(e,t=1,n=!1){let r=L?P:e;for(var o;t--;)o=r,r=Te(r);if(!L)return r;var i=null==r?void 0:r.nodeType;if(n&&3!==i){var a=er();return null===r?null==o||o.after(a):r.before(a),Re(a),a}return Re(r),r}function io(e){e.textContent=""}function bn(e){return e===this.v}function oo(e,t){return e!=e?t==t:e!==t||null!==e&&"object"==typeof e||"function"==typeof e}function yn(e){return!oo(e,this.v)}function tr(e){var t=2050,n=null!==R&&2&R.f?R:null;return null===I||null!==n&&n.f&ee?t|=ee:I.f|=gn,{ctx:W,deps:null,effects:null,equals:bn,f:t,fn:e,reactions:null,rv:0,v:null,wv:0,parent:n??I}}function st(e){const t=tr(e);return On(t),t}function En(e){var t=e.effects;if(null!==t){e.effects=null;for(var n=0;n<t.length;n+=1)Ie(t[n])}}function ao(e){for(var t=e.parent;null!==t;){if(!(2&t.f))return t;t=t.parent}return null}function xn(e){var t,n=I;Se(ao(e));try{En(e),t=jn(e)}finally{Se(n)}return t}function $n(e){var t=xn(e);ue(e,(Ce||e.f&ee)&&null!==e.deps?Ue:K),e.equals(t)||(e.v=t,e.wv=Mn())}function lo(e){null===I&&null===R&&Ji(),null!==R&&!!(R.f&ee)&&null===I&&Zi(),gt&&Gi()}function so(e,t){var n=t.last;null===n?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function je(e,t,n,r=!0){var o=I,i={ctx:W,deps:null,nodes_start:null,nodes_end:null,f:e|he,first:null,fn:t,last:null,next:null,parent:o,prev:null,teardown:null,transitions:null,wv:0};if(n)try{ir(i),i.f|=Hi}catch(e){throw Ie(i),e}else null!==t&&Lt(i);if(!(n&&null===i.deps&&null===i.first&&null===i.nodes_start&&null===i.teardown&&!(i.f&(gn|xt)))&&r&&(null!==o&&so(i,o),null!==R&&2&R.f)){var a=R;(a.effects??(a.effects=[])).push(i)}return i}function kn(e){const t=je(8,null,!1);return ue(t,K),t.teardown=e,t}function Yt(e){if(lo(),!(null!==I&&!!(32&I.f)&&null!==W&&!W.m))return rr(e);var t=W;(t.e??(t.e=[])).push({fn:e,effect:I,reaction:R})}function fo(e){const t=je(64,e,!0);return()=>{Ie(t)}}function uo(e){const t=je(64,e,!0);return(e={})=>new Promise((n=>{e.outro?Zt(t,(()=>{Ie(t),n(void 0)})):(Ie(t),n(void 0))}))}function rr(e){return je(4,e,!1)}function nr(e){return je(8,e,!0)}function Pe(e,t=[],n=tr){const r=t.map(n);return Cn((()=>e(...r.map(c))))}function Cn(e,t=0){return je(24|t,e,!0)}function Gt(e,t=!0){return je(40,e,!0,t)}function An(e){var t=e.teardown;if(null!==t){const e=gt,n=R;Jr(!0),ve(null);try{t.call(null)}finally{Jr(e),ve(n)}}}function Rn(e,t=!1){var n=e.first;for(e.first=e.last=null;null!==n;){var r=n.next;64&n.f?n.parent=null:Ie(n,t),n=r}}function co(e){for(var t=e.first;null!==t;){var n=t.next;!(32&t.f)&&Ie(t),t=n}}function Ie(e,t=!0){var n=!1;(t||!!(e.f&Wi))&&null!==e.nodes_start&&(In(e.nodes_start,e.nodes_end),n=!0),Rn(e,t&&!n),Rt(e,0),ue(e,St);var r=e.transitions;if(null!==r)for(const e of r)e.stop();An(e);var o=e.parent;null!==o&&null!==o.first&&Sn(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes_start=e.nodes_end=null}function In(e,t){for(;null!==e;){var n=e===t?null:Te(e);e.remove(),e=n}}function Sn(e){var t=e.parent,n=e.prev,r=e.next;null!==n&&(n.next=r),null!==r&&(r.prev=n),null!==t&&(t.first===e&&(t.first=r),t.last===e&&(t.last=n))}function Zt(e,t){var n=[];Tn(e,n,!0),ho(n,(()=>{Ie(e),t&&t()}))}function ho(e,t){var n=e.length;if(n>0){var r=()=>--n||t();for(var o of e)o.out(r)}else t()}function Tn(e,t,n){if(!(e.f&Ke)){if(e.f^=Ke,null!==e.transitions)for(const r of e.transitions)(r.is_global||n)&&t.push(r);for(var r=e.first;null!==r;){var o=r.next;Tn(r,t,!!(!!(r.f&Qt)||!!(32&r.f))&&n),r=o}}}function Zr(e){Nn(e,!0)}function Nn(e,t){if(e.f&Ke){e.f^=Ke,!(e.f&K)&&(e.f^=K),_t(e)&&(ue(e,he),Lt(e));for(var n=e.first;null!==n;){var r=n.next;Nn(n,!!(!!(n.f&Qt)||!!(32&n.f))&&t),n=r}if(null!==e.transitions)for(const n of e.transitions)(n.is_global||t)&&n.in()}}const vo=typeof requestIdleCallback>"u"?e=>setTimeout(e,1):requestIdleCallback;let dt=[],ht=[];function Ln(){var e=dt;dt=[],hn(e)}function Dn(){var e=ht;ht=[],hn(e)}function Pn(e){0===dt.length&&queueMicrotask(Ln),dt.push(e)}function go(e){0===ht.length&&vo(Dn),ht.push(e)}function _o(){dt.length>0&&Ln(),ht.length>0&&Dn()}let pt=!1,kt=!1,Ct=null,Fe=!1,gt=!1;function Jr(e){gt=e}let ct=[],R=null,de=!1;function ve(e){R=e}let I=null;function Se(e){I=e}let H=null;function On(e){null!==R&&R.f&Ht&&(null===H?H=[e]:H.push(e))}let q=null,Q=0,ie=null;function mo(e){ie=e}let Fn=1,At=0,Ce=!1;function Mn(){return++Fn}function _t(e){var t,n=e.f;if(n&he)return!0;if(n&Ue){var r=e.deps,o=!!(n&ee);if(null!==r){var i,a,l=!!(n&$t),s=o&&null!==I&&!Ce,u=r.length;if(l||s){var c=e,f=c.parent;for(i=0;i<u;i++)a=r[i],(l||null==(t=null==a?void 0:a.reactions)||!t.includes(c))&&(a.reactions??(a.reactions=[])).push(c);l&&(c.f^=$t),s&&null!==f&&!(f.f&ee)&&(c.f^=ee)}for(i=0;i<u;i++)if(_t(a=r[i])&&$n(a),a.wv>e.wv)return!0}(!o||null!==I&&!Ce)&&ue(e,K)}return!1}function wo(e,t){for(var n=t;null!==n;){if(n.f&xt)try{return void n.fn(e)}catch{n.f^=xt}n=n.parent}throw pt=!1,e}function Kr(e){return!(e.f&St||null!==e.parent&&e.parent.f&xt)}function Nt(e,t,n,r){if(pt){if(null===n&&(pt=!1),Kr(t))throw e}else if(null!==n&&(pt=!0),wo(e,t),Kr(t))throw e}function Un(e,t,n=!0){var r=e.reactions;if(null!==r)for(var o=0;o<r.length;o++){var i=r[o];null!=H&&H.includes(e)||(2&i.f?Un(i,t,!1):t===i&&(n?ue(i,he):!!(i.f&K)&&ue(i,Ue),Lt(i)))}}function jn(e){var t,n=q,r=Q,o=ie,i=R,a=Ce,l=H,s=W,u=de,c=e.f;q=null,Q=0,ie=null,Ce=!!(c&ee)&&(de||!Fe||null===R),R=96&c?null:e,H=null,zr(e.ctx),de=!1,At++,e.f|=Ht;try{var f=(0,e.fn)(),d=e.deps;if(null!==q){var v;if(Rt(e,Q),null!==d&&Q>0)for(d.length=Q+q.length,v=0;v<q.length;v++)d[Q+v]=q[v];else e.deps=d=q;if(!Ce)for(v=Q;v<d.length;v++)((t=d[v]).reactions??(t.reactions=[])).push(e)}else null!==d&&Q<d.length&&(Rt(e,Q),d.length=Q);if(Gn()&&null!==ie&&!de&&null!==d&&!(6146&e.f))for(v=0;v<ie.length;v++)Un(ie[v],e);return null!==i&&i!==e&&(At++,null!==ie&&(null===o?o=ie:o.push(...ie))),f}finally{q=n,Q=r,ie=o,R=i,Ce=a,H=l,zr(s),de=u,e.f^=Ht}}function po(e,t){let n=t.reactions;if(null!==n){var r=Ui.call(n,e);if(-1!==r){var o=n.length-1;0===o?n=t.reactions=null:(n[r]=n[o],n.pop())}}null===n&&2&t.f&&(null===q||!q.includes(t))&&(ue(t,Ue),!(768&t.f)&&(t.f^=$t),En(t),Rt(t,0))}function Rt(e,t){var n=e.deps;if(null!==n)for(var r=t;r<n.length;r++)po(e,n[r])}function ir(e){var t=e.f;if(!(t&St)){ue(e,K);var n=I,r=W,o=Fe;I=e,Fe=!0;try{16&t?co(e):Rn(e),An(e);var i=jn(e);e.teardown="function"==typeof i?i:null,e.wv=Fn;e.deps}catch(t){Nt(t,e,n,r||e.ctx)}finally{Fe=o,I=n}}}function bo(){try{Ki()}catch(e){if(null===Ct)throw e;Nt(e,Ct,null)}}function Vn(){var e=Fe;try{var t=0;for(Fe=!0;ct.length>0;){t++>1e3&&bo();var n=ct,r=n.length;ct=[];for(var o=0;o<r;o++){yo(Eo(n[o]))}vt.clear()}}finally{kt=!1,Fe=e,Ct=null}}function yo(e){var t=e.length;if(0!==t)for(var n=0;n<t;n++){var r=e[n];if(!(24576&r.f))try{_t(r)&&(ir(r),null===r.deps&&null===r.first&&null===r.nodes_start&&(null===r.teardown?Sn(r):r.fn=null))}catch(e){Nt(e,r,null,r.ctx)}}}function Lt(e){kt||(kt=!0,queueMicrotask(Vn));for(var t=Ct=e;null!==t.parent;){var n=(t=t.parent).f;if(96&n){if(!(n&K))return;t.f^=K}}ct.push(t)}function Eo(e){for(var t=[],n=e;null!==n;){var r=n.f,o=!!(96&r);if(!(o&&!!(r&K)||r&Ke)){if(4&r)t.push(n);else if(o)n.f^=K;else try{_t(n)&&ir(n)}catch(e){Nt(e,n,null,n.ctx)}var i=n.first;if(null!==i){n=i;continue}}var a=n.parent;for(n=n.next;null===n&&null!==a;)n=a.next,a=a.parent}return t}function $(e){for(;;){if(_o(),0===ct.length)return;kt=!0,Vn()}}async function xo(){await Promise.resolve(),$()}function c(e){var t=!!(2&e.f);if(null===R||de){if(t&&null===e.deps&&null===e.effects){var n=e,r=n.parent;null!==r&&!(r.f&ee)&&(n.f^=ee)}}else if(null==H||!H.includes(e)){var o=R.deps;e.rv<At&&(e.rv=At,null===q&&null!==o&&o[Q]===e?Q++:null===q?q=[e]:(!Ce||!q.includes(e))&&q.push(e))}return t&&(_t(n=e)&&$n(n)),gt&&vt.has(e)?vt.get(e):e.v}function Xe(e){var t=de;try{return de=!0,e()}finally{de=t}}const $o=-7169;function ue(e,t){e.f=e.f&$o|t}const vt=new Map;function Bn(e,t){return{f:0,v:e,reactions:null,equals:bn,rv:0,wv:0}}function J(e,t){const n=Bn(e);return On(n),n}function qn(e,t=!1){const n=Bn(e);return t||(n.equals=yn),n}function D(e,t,n=!1){return null!==R&&!de&&Gn()&&18&R.f&&(null==H||!H.includes(e))&&to(),ko(e,n?ke(t):t)}function ko(e,t){if(!e.equals(t)){var n=e.v;gt?vt.set(e,t):vt.set(e,n),e.v=t,!!(2&e.f)&&(!!(e.f&he)&&xn(e),ue(e,e.f&ee?Ue:K)),e.wv=Mn(),Hn(e,he),null!==I&&I.f&K&&!(96&I.f)&&(null===ie?mo([e]):ie.push(e))}return t}function Hn(e,t){var n=e.reactions;if(null!==n)for(var r=n.length,o=0;o<r;o++){var i=n[o],a=i.f;!(a&he)&&(ue(i,t),1280&a&&(2&a?Hn(i,Ue):Lt(i)))}}let W=null;function zr(e){W=e}function Wn(e,t=!1,n){var r=W={p:W,c:null,d:!1,e:null,m:!1,s:e,x:null,l:null};kn((()=>{r.d=!0}))}function Yn(e){const t=W;if(null!==t){void 0!==e&&(t.x=e);const a=t.e;if(null!==a){var n=I,r=R;t.e=null;try{for(var o=0;o<a.length;o++){var i=a[o];Se(i.effect),ve(i.reaction),rr(i.fn)}}finally{Se(n),ve(r)}}W=t.p,t.m=!0}return e||{}}function Gn(){return!0}const Co=["touchstart","touchmove"];function Ao(e){return Co.includes(e)}let Xr=!1;function Zn(){Xr||(Xr=!0,document.addEventListener("reset",(e=>{Promise.resolve().then((()=>{var t;if(!e.defaultPrevented)for(const n of e.target.elements)null==(t=n.__on_r)||t.call(n)}))}),{capture:!0}))}function Jn(e){var t=R,n=I;ve(null),Se(null);try{return e()}finally{ve(t),Se(n)}}function Ro(e,t,n,r=n){e.addEventListener(t,(()=>Jn(n)));const o=e.__on_r;e.__on_r=o?()=>{o(),r(!0)}:()=>r(!0),Zn()}const Kn=new Set,Jt=new Set;function Io(e,t,n,r={}){function o(e){if(r.capture||ft.call(t,e),!e.cancelBubble)return Jn((()=>null==n?void 0:n.call(this,e)))}return e.startsWith("pointer")||e.startsWith("touch")||"wheel"===e?Pn((()=>{t.addEventListener(e,o,r)})):t.addEventListener(e,o,r),o}function So(e,t,n,r,o){var i={capture:r,passive:o},a=Io(e,t,n,i);(t===document.body||t===window||t===document)&&kn((()=>{t.removeEventListener(e,a,i)}))}function To(e){for(var t=0;t<e.length;t++)Kn.add(e[t]);for(var n of Jt)n(e)}function ft(e){var t,n=this,r=n.ownerDocument,o=e.type,i=(null==(t=e.composedPath)?void 0:t.call(e))||[],a=i[0]||e.target,l=0,s=e.__root;if(s){var u=i.indexOf(s);if(-1!==u&&(n===document||n===window))return void(e.__root=n);var c=i.indexOf(n);if(-1===c)return;u<=c&&(l=u)}if((a=i[l]||e.target)!==n){Et(e,"currentTarget",{configurable:!0,get:()=>a||r});var f=R,d=I;ve(null),Se(null);try{for(var v,h=[];null!==a;){var p=a.assignedSlot||a.parentNode||a.host||null;try{var g=a["__"+o];if(null!=g&&(!a.disabled||e.target===a))if(cn(g)){var[m,...b]=g;m.apply(a,[e,...b])}else g.call(a,e)}catch(e){v?h.push(e):v=e}if(e.cancelBubble||p===n||null===p)break;a=p}if(v){for(let e of h)queueMicrotask((()=>{throw e}));throw v}}finally{e.__root=n,delete e.currentTarget,ve(f),Se(d)}}}function or(e){var t=document.createElement("template");return t.innerHTML=e,t.content}function Ae(e,t){var n=I;null===n.nodes_start&&(n.nodes_start=e,n.nodes_end=t)}function ge(e,t){var n,r=!!(1&t),o=!!(2&t),i=!e.startsWith("<!>");return()=>{if(L)return Ae(P,null),P;void 0===n&&(n=or(i?e:"<!>"+e),r||(n=ae(n)));var t=o||mn?document.importNode(n,!0):n.cloneNode(!0);r?Ae(ae(t),t.lastChild):Ae(t,t);return t}}function No(e,t,n="svg"){var r,o=`<${n}>${!e.startsWith("<!>")?e:"<!>"+e}</${n}>`;return()=>{if(L)return Ae(P,null),P;if(!r){var e=or(o);r=ae(ae(e))}var t=r.cloneNode(!0);return Ae(t,t),t}}function ne(e,t){if(L)return I.nodes_end=P,void ze();null!==e&&e.before(t)}function zn(e,t){return Xn(e,t)}function Lo(e,t){Wt(),t.intro=t.intro??!1;const n=t.target,r=L,o=P;try{for(var i=ae(n);i&&(8!==i.nodeType||i.data!==zt);)i=Te(i);if(!i)throw Je;Ze(!0),Re(i),ze();const r=Xn(e,{...t,anchor:i});if(null===P||8!==P.nodeType||P.data!==fn)throw Tt(),Je;return Ze(!1),r}catch(r){if(r===Je)return!1===t.recover&&zi(),Wt(),io(n),Ze(!1),zn(e,t);throw r}finally{Ze(r),Re(o)}}const Ye=new Map;function Xn(e,{target:t,anchor:n,props:r={},events:o,context:i,intro:a=!0}){Wt();var l=new Set,s=e=>{for(var n=0;n<e.length;n++){var r=e[n];if(!l.has(r)){l.add(r);var o=Ao(r);t.addEventListener(r,ft,{passive:o});var i=Ye.get(r);void 0===i?(document.addEventListener(r,ft,{passive:o}),Ye.set(r,1)):Ye.set(r,i+1)}}};s(ji(Kn)),Jt.add(s);var u=void 0,c=uo((()=>{var a=n??t.appendChild(er());return Gt((()=>{i&&(Wn({}),W.c=i);o&&(r.$$events=o),L&&Ae(a,null),u=e(a,r)||{},L&&(I.nodes_end=P),i&&Yn()})),()=>{var e;for(var r of l){t.removeEventListener(r,ft);var o=Ye.get(r);0==--o?(document.removeEventListener(r,ft),Ye.delete(r)):Ye.set(r,o)}Jt.delete(s),a!==n&&(null==(e=a.parentNode)||e.removeChild(a))}}));return Kt.set(u,c),u}let Kt=new WeakMap;function Do(e,t){const n=Kt.get(e);return n?(Kt.delete(e),n(t)):Promise.resolve()}function $e(e,t,[n,r]=[0,0]){L&&0===n&&ze();var o=e,i=null,a=null,l=Z,s=!1;const u=(e,t=!0)=>{s=!0,c(t,e)},c=(e,t)=>{if(l===(l=e))return;let s=!1;if(L&&-1!==r){if(0===n){const e=o.data;e===zt?r=0:e===sn?r=1/0:(r=parseInt(e.substring(1)))!=r&&(r=l?1/0:-1)}!!l===r>n&&(Re(o=ro()),Ze(!1),s=!0,r=-1)}l?(i?Zr(i):t&&(i=Gt((()=>t(o)))),a&&Zt(a,(()=>{a=null}))):(a?Zr(a):t&&(a=Gt((()=>t(o,[n+1,r])))),i&&Zt(i,(()=>{i=null}))),s&&Ze(!0)};Cn((()=>{s=!1,t(u),s||c(null,null)}),n>0?Qt:0),L&&(o=P)}function Ge(e,t,n=!1,r=!1,o=!1){var i=e,a="";Pe((()=>{var e=I;if(a!==(a=t()??"")){if(null!==e.nodes_start&&(In(e.nodes_start,e.nodes_end),e.nodes_start=e.nodes_end=null),""!==a){if(L){P.data;for(var o=ze(),l=o;null!==o&&(8!==o.nodeType||""!==o.data);)l=o,o=Te(o);if(null===o)throw Tt(),Je;return Ae(P,l),void(i=Re(o))}var s=a+"";n?s=`<svg>${s}</svg>`:r&&(s=`<math>${s}</math>`);var u=or(s);if((n||r)&&(u=ae(u)),Ae(ae(u),u.lastChild),n||r)for(;ae(u);)i.before(ae(u));else i.before(u)}}else L&&ze()}))}function Po(e,t,n,r,o){var i;L&&ze();var a=null==(i=t.$$slots)?void 0:i[n],l=!1;!0===a&&(a=t.children,l=!0),void 0===a||a(e,l?()=>r:r)}const Qr=[..." \t\n\r\f \v\ufeff"];function Oo(e,t,n){var r=""+e;if(n)for(var o in n)if(n[o])r=r?r+" "+o:o;else if(r.length)for(var i=o.length,a=0;(a=r.indexOf(o,a))>=0;){var l=a+i;0!==a&&!Qr.includes(r[a-1])||l!==r.length&&!Qr.includes(r[l])?a=l:r=(0===a?"":r.substring(0,a))+r.substring(l+1)}return""===r?null:r}function Fo(e,t,n,r,o,i){var a=e.__className;if(L||a!==n||void 0===a){var l=Oo(n,r,i);(!L||l!==e.getAttribute("class"))&&(null==l?e.removeAttribute("class"):e.className=l),e.__className=n}else if(i&&o!==i)for(var s in i){var u=!!i[s];(null==o||u!==!!o[s])&&e.classList.toggle(s,u)}return i}const Mo=Symbol("is custom element"),Uo=Symbol("is html");function en(e){if(L){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var n=e.value;se(e,"value",null),e.value=n}if(e.hasAttribute("checked")){var r=e.checked;se(e,"checked",null),e.checked=r}}};e.__on_r=n,go(n),Zn()}}function jo(e,t){var n=Qn(e);n.value===(n.value=t??void 0)||e.value===t&&(0!==t||"PROGRESS"!==e.nodeName)||(e.value=t??"")}function se(e,t,n,r){var o=Qn(e);L&&(o[t]=e.getAttribute(t),"src"===t||"srcset"===t||"href"===t&&"LINK"===e.nodeName)||o[t]!==(o[t]=n)&&("loading"===t&&(e[Yi]=n),null==n?e.removeAttribute(t):"string"!=typeof n&&Vo(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function Qn(e){return e.__attributes??(e.__attributes={[Mo]:e.nodeName.includes("-"),[Uo]:e.namespaceURI===Mi})}var tn=new Map;function Vo(e){var t=tn.get(e.nodeName);if(t)return t;tn.set(e.nodeName,t=[]);for(var n,r=e,o=Element.prototype;o!==r;){for(var i in n=Vi(r))n[i].set&&t.push(i);r=dn(r)}return t}function Bo(e,t,n=t){Ro(e,"change",(t=>{var r=t?e.defaultChecked:e.checked;n(r)})),(L&&e.defaultChecked!==e.checked||null==Xe(t))&&n(e.checked),nr((()=>{var n=t();e.checked=!!n}))}function rn(e,t){return e===t||(null==e?void 0:e[ut])===t}function nn(e={},t,n,r){return rr((()=>{var r,o;return nr((()=>{r=o,o=[],Xe((()=>{e!==n(...o)&&(t(e,...o),r&&rn(n(...r),e)&&t(null,...r))}))})),()=>{Pn((()=>{o&&rn(n(...o),e)&&t(null,...o)}))}})),e}function ei(e){null===W&&un(),Yt((()=>{const t=Xe(e);if("function"==typeof t)return t}))}function qo(e){null===W&&un(),ei((()=>()=>Xe(e)))}let wt=!1;function Ho(e){var t=wt;try{return wt=!1,[e(),wt]}finally{wt=t}}function on(e){var t;return(null==(t=e.ctx)?void 0:t.d)??!1}function A(e,t,n,r){var o,i,a=!!(1&n),l=!!(8&n),s=!!(16&n),u=!1;l?[i,u]=Ho((()=>e[t])):i=e[t];var f,d=ut in e||_n in e,v=l&&((null==(o=Oe(e,t))?void 0:o.set)??(d&&t in e&&(n=>e[t]=n)))||void 0,h=r,p=!0,g=!1,m=()=>(g=!0,p&&(p=!1,h=s?Xe(r):r),h);if(void 0===i&&void 0!==r&&(v&&Xi(),i=m(),v&&v(i)),f=()=>{var n=e[t];return void 0===n?m():(p=!0,g=!1,n)},!(4&n))return f;if(v){var b=e.$$legacy;return function(e,t){return arguments.length>0?((!t||b||u)&&v(t?f():e),e):f()}}var w=!1,y=qn(i),$=tr((()=>{var e=f(),t=c(y);return w?(w=!1,t):y.v=e}));return l&&c($),a||($.equals=yn),function(e,t){if(arguments.length>0){const n=t?c($):l?ke(e):e;if(!$.equals(n)){if(w=!0,D(y,n),g&&void 0!==h&&(h=n),on($))return e;Xe((()=>c($)))}return e}return on($)?$.v:c($)}}function Wo(e){return new Yo(e)}var pe,oe;class Yo{constructor(e){var t;Vt(this,pe),Vt(this,oe);var n=new Map,r=(e,t)=>{var r=qn(t);return n.set(e,r),r};const o=new Proxy({...e.props||{},$$events:{}},{get:(e,t)=>c(n.get(t)??r(t,Reflect.get(e,t))),has:(e,t)=>t===_n||(c(n.get(t)??r(t,Reflect.get(e,t))),Reflect.has(e,t)),set:(e,t,o)=>(D(n.get(t)??r(t,o),o),Reflect.set(e,t,o))});Bt(this,oe,(e.hydrate?Lo:zn)(e.component,{target:e.target,anchor:e.anchor,props:o,context:e.context,intro:e.intro??!1,recover:e.recover})),(!(null!=(t=null==e?void 0:e.props)&&t.$$host)||!1===e.sync)&&$(),Bt(this,pe,o.$$events);for(const e of Object.keys(G(this,oe)))"$set"===e||"$destroy"===e||"$on"===e||Et(this,e,{get(){return G(this,oe)[e]},set(t){G(this,oe)[e]=t},enumerable:!0});G(this,oe).$set=e=>{Object.assign(o,e)},G(this,oe).$destroy=()=>{Do(G(this,oe))}}$set(e){G(this,oe).$set(e)}$on(e,t){G(this,pe)[e]=G(this,pe)[e]||[];const n=(...e)=>t.call(this,...e);return G(this,pe)[e].push(n),()=>{G(this,pe)[e]=G(this,pe)[e].filter((e=>e!==n))}}$destroy(){G(this,oe).$destroy()}}let ti;function bt(e,t,n,r){var o;const i=null==(o=n[e])?void 0:o.type;if(t="Boolean"===i&&"boolean"!=typeof t?null!=t:t,!r||!n[e])return t;if("toAttribute"===r)switch(i){case"Object":case"Array":return null==t?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(i){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":default:return t;case"Number":return null!=t?+t:t}}function Go(e){const t={};return e.childNodes.forEach((e=>{t[e.slot||"default"]=!0})),t}function Zo(e,t,n,r,o,i){let a=class extends ti{constructor(){super(e,n,o),this.$$p_d=t}static get observedAttributes(){return yt(t).map((e=>(t[e].attribute||e).toLowerCase()))}};return yt(t).forEach((e=>{Et(a.prototype,e,{get(){return this.$$c&&e in this.$$c?this.$$c[e]:this.$$d[e]},set(n){var r;n=bt(e,n,t),this.$$d[e]=n;var o=this.$$c;o&&((null==(r=Oe(o,e))?void 0:r.get)?o[e]=n:o.$set({[e]:n}))}})})),r.forEach((e=>{Et(a.prototype,e,{get(){var t;return null==(t=this.$$c)?void 0:t[e]}})})),e.element=a,a}pe=new WeakMap,oe=new WeakMap,"function"==typeof HTMLElement&&(ti=class extends HTMLElement{constructor(e,t,n){super(),le(this,"$$ctor"),le(this,"$$s"),le(this,"$$c"),le(this,"$$cn",!1),le(this,"$$d",{}),le(this,"$$r",!1),le(this,"$$p_d",{}),le(this,"$$l",{}),le(this,"$$l_u",new Map),le(this,"$$me"),this.$$ctor=e,this.$$s=t,n&&this.attachShadow({mode:"open"})}addEventListener(e,t,n){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,n)}removeEventListener(e,t,n){if(super.removeEventListener(e,t,n),this.$$c){const e=this.$$l_u.get(t);e&&(e(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(e){return t=>{const n=document.createElement("slot");"default"!==e&&(n.name=e),ne(t,n)}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;const t={},n=Go(this);for(const r of this.$$s)r in n&&("default"!==r||this.$$d.children?t[r]=e(r):(this.$$d.children=e(r),t.default=!0));for(const e of this.attributes){const t=this.$$g_p(e.name);t in this.$$d||(this.$$d[t]=bt(t,e.value,this.$$p_d,"toProp"))}for(const e in this.$$p_d)!(e in this.$$d)&&void 0!==this[e]&&(this.$$d[e]=this[e],delete this[e]);this.$$c=Wo({component:this.$$ctor,target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$host:this}}),this.$$me=fo((()=>{nr((()=>{var e;this.$$r=!0;for(const t of yt(this.$$c)){if(null==(e=this.$$p_d[t])||!e.reflect)continue;this.$$d[t]=this.$$c[t];const n=bt(t,this.$$d[t],this.$$p_d,"toAttribute");null==n?this.removeAttribute(this.$$p_d[t].attribute||t):this.setAttribute(this.$$p_d[t].attribute||t,n)}this.$$r=!1}))}));for(const e in this.$$l)for(const t of this.$$l[e]){const n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}this.$$l={}}}attributeChangedCallback(e,t,n){var r;this.$$r||(e=this.$$g_p(e),this.$$d[e]=bt(e,n,this.$$p_d,"toProp"),null==(r=this.$$c)||r.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then((()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$me(),this.$$c=void 0)}))}$$g_p(e){return yt(this.$$p_d).find((t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e))||e}});const ri=new TextEncoder;function Jo(e){return[...new Uint8Array(e)].map((e=>e.toString(16).padStart(2,"0"))).join("")}async function Ko(e,t="SHA-256",n=1e5){const r=Date.now().toString(16);e||(e=Math.round(Math.random()*n));return{algorithm:t,challenge:await ni(r,e,t),salt:r,signature:""}}async function ni(e,t,n){if(typeof crypto>"u"||!("subtle"in crypto)||!("digest"in crypto.subtle))throw new Error("Web Crypto is not available. Secure context is required (https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts).");return Jo(await crypto.subtle.digest(n.toUpperCase(),ri.encode(e+t)))}function zo(e,t,n="SHA-256",r=1e6,o=0){const i=new AbortController,a=Date.now();return{promise:(async()=>{for(let l=o;l<=r;l+=1){if(i.signal.aborted)return null;if(await ni(t,l,n)===e)return{number:l,took:Date.now()-a}}return null})(),controller:i}}function Xo(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function Qo(e){const t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}function ea(e,t=12){const n=new Uint8Array(t);for(let r=0;r<t;r++)n[r]=e%256,e=Math.floor(e/256);return n}async function ta(e,t="",n=1e6,r=0){const o="AES-GCM",i=new AbortController,a=Date.now();let l=null,s=null;try{s=Qo(e);const n=await crypto.subtle.digest("SHA-256",ri.encode(t));l=await crypto.subtle.importKey("raw",n,o,!1,["decrypt"])}catch{return{promise:Promise.reject(),controller:i}}return{promise:(async()=>{for(let e=r;e<=n;e+=1){if(i.signal.aborted||!l||!s)return null;try{const t=await crypto.subtle.decrypt({name:o,iv:ea(e)},l,s);if(t)return{clearText:(new TextDecoder).decode(t),took:Date.now()-a}}catch{}}return null})(),controller:i}}var b=(e=>(e.ERROR="error",e.VERIFIED="verified",e.VERIFYING="verifying",e.UNVERIFIED="unverified",e.EXPIRED="expired",e))(b||{}),ra=No('<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z" fill="currentColor" opacity=".25"></path><path d="M12,4a8,8,0,0,1,7.89,6.7A1.53,1.53,0,0,0,21.38,12h0a1.5,1.5,0,0,0,1.48-1.75,11,11,0,0,0-21.72,0A1.5,1.5,0,0,0,2.62,12h0a1.53,1.53,0,0,0,1.49-1.3A8,8,0,0,1,12,4Z" fill="currentColor" class="altcha-spinner"></path></svg>'),na=ge('<span role="status" aria-live="polite"><!></span> <input type="hidden">',1),ia=ge('<span role="status" aria-live="polite"><!></span>'),oa=ge("<label><!></label>"),aa=ge('<div><a target="_blank" class="altcha-logo"><svg width="22" height="22" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M2.33955 16.4279C5.88954 20.6586 12.1971 21.2105 16.4279 17.6604C18.4699 15.947 19.6548 13.5911 19.9352 11.1365L17.9886 10.4279C17.8738 12.5624 16.909 14.6459 15.1423 16.1284C11.7577 18.9684 6.71167 18.5269 3.87164 15.1423C1.03163 11.7577 1.4731 6.71166 4.8577 3.87164C8.24231 1.03162 13.2883 1.4731 16.1284 4.8577C16.9767 5.86872 17.5322 7.02798 17.804 8.2324L19.9522 9.01429C19.7622 7.07737 19.0059 5.17558 17.6604 3.57212C14.1104 -0.658624 7.80283 -1.21043 3.57212 2.33956C-0.658625 5.88958 -1.21046 12.1971 2.33955 16.4279Z" fill="currentColor"></path><path d="M3.57212 2.33956C1.65755 3.94607 0.496389 6.11731 0.12782 8.40523L2.04639 9.13961C2.26047 7.15832 3.21057 5.25375 4.8577 3.87164C8.24231 1.03162 13.2883 1.4731 16.1284 4.8577L13.8302 6.78606L19.9633 9.13364C19.7929 7.15555 19.0335 5.20847 17.6604 3.57212C14.1104 -0.658624 7.80283 -1.21043 3.57212 2.33956Z" fill="currentColor"></path><path d="M7 10H5C5 12.7614 7.23858 15 10 15C12.7614 15 15 12.7614 15 10H13C13 11.6569 11.6569 13 10 13C8.3431 13 7 11.6569 7 10Z" fill="currentColor"></path></svg></a></div>'),la=ge("<div><!></div>"),sa=ge("<div><!></div>"),fa=ge('<div class="altcha-error"><svg width="14" height="14" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg> <!></div>'),ua=ge('<div class="altcha-footer"><div><!></div></div>'),ca=ge('<div class="altcha-anchor-arrow"></div>'),da=ge('<!> <div class="altcha"><div class="altcha-main"><!> <div><input type="checkbox"></div> <div class="altcha-label"><!></div> <!></div> <!> <!> <!></div>',1);function ha(e,t){var n,r;Wn(t,!0);let o=A(t,"auto",7,void 0),i=A(t,"blockspam",7,void 0),a=A(t,"challengeurl",7,void 0),l=A(t,"challengejson",7,void 0),s=A(t,"customfetch",7,void 0),u=A(t,"debug",7,!1),f=A(t,"delay",7,0),d=A(t,"expire",7,void 0),v=A(t,"floating",7,void 0),h=A(t,"floatinganchor",7,void 0),p=A(t,"floatingoffset",7,void 0),g=A(t,"floatingpersist",7,!1),m=A(t,"hidefooter",7,!1),w=A(t,"hidelogo",7,!1),y=A(t,"id",7,void 0),x=A(t,"name",7,"altcha"),E=A(t,"maxnumber",7,1e6),R=A(t,"mockerror",7,!1),_=A(t,"obfuscated",7,void 0),k=A(t,"plugins",7,void 0),I=A(t,"refetchonexpire",7,!0),C=A(t,"spamfilter",7,!1),L=A(t,"strings",7,void 0),S=A(t,"test",7,!1),P=A(t,"verifyurl",7,void 0),N=A(t,"workers",23,(()=>Math.min(16,navigator.hardwareConcurrency||8))),T=A(t,"workerurl",7,void 0);const O=["SHA-256","SHA-384","SHA-512"],q="Visit Altcha.org",F="https://altcha.org/",U=(e,n)=>{t.$$host.dispatchEvent(new CustomEvent(e,{detail:n}))},j=null==(r=null==(n=document.documentElement.lang)?void 0:n.split("-"))?void 0:r[0],M=st((()=>{var e;return a()&&new URL(a(),location.origin).host.endsWith(".altcha.org")&&!(null==(e=a())||!e.includes("apiKey=ckey_"))})),W=st((()=>l()?be(l()):void 0)),V=st((()=>L()?be(L()):{})),Z=st((()=>{var e;return{ariaLinkLabel:q,error:"Verification failed. Try again later.",expired:"Verification expired. Try again.",footer:`Protected by <a href="${F}" target="_blank" aria-label="${(null==(e=c(V))?void 0:e.ariaLinkLabel)||q}">ALTCHA</a>`,label:"I'm not a robot",verified:"Verified",verifying:"Verifying...",waitAlert:"Verifying... please wait.",...c(V)}})),G=st((()=>`${y()||x()}_checkbox`));let H=J(!1),K=J(ke(b.UNVERIFIED)),B=J(void 0),Q=J(null),Y=null,ee=null,te=J(null),re=null,oe=[],ie=J(null);function ae(e,t){return btoa(JSON.stringify({algorithm:e.algorithm,challenge:e.challenge,number:t.number,salt:e.salt,signature:e.signature,test:!!S()||void 0,took:t.took}))}function le(){a()&&I()&&c(K)===b.VERIFIED?Ue():Te(b.EXPIRED,c(Z).expired)}function ue(){let e=fetch;if(s())if(ce("using customfetch"),"string"==typeof s()){if(e=globalThis[s()]||null,!e)throw new Error(`Custom fetch function not found: ${s()}`)}else e=s();return e}function ce(...e){(u()||e.some((e=>e instanceof Error)))&&console[e[0]instanceof Error?"error":"log"]("ALTCHA",`[name=${x()}]`,...e)}function fe(e){const t=e.target;v()&&t&&!c(B).contains(t)&&(c(K)===b.VERIFIED&&!1===g()||c(K)===b.VERIFIED&&"focus"===g()&&(null==ee||!ee.matches(":focus-within"))||"off"===o()&&c(K)===b.UNVERIFIED)&&De()}function de(){v()&&c(K)!==b.UNVERIFIED&&Ne()}function ve(e){c(K)===b.UNVERIFIED?Ue():v()&&"focus"===g()&&c(K)===b.VERIFIED&&Fe()}function he(e){ee&&"onsubmit"===o()?c(K)===b.UNVERIFIED?(e.preventDefault(),e.stopPropagation(),Ue().then((()=>{ee&&"requestSubmit"in ee?ee.requestSubmit():null!=ee&&ee.reportValidity()&&ee.submit()}))):c(K)!==b.VERIFIED&&(e.preventDefault(),e.stopPropagation(),c(K)===b.VERIFYING&&ge()):ee&&v()&&"off"===o()&&c(K)===b.UNVERIFIED&&(e.preventDefault(),e.stopPropagation(),Fe())}function pe(){Te()}function ge(){c(K)===b.VERIFYING&&c(Z).waitAlert&&alert(c(Z).waitAlert)}function me(){v()&&Ne()}function be(e){return JSON.parse(e)}async function ye(e){if(!P())throw new Error("Attribute verifyurl not set.");ce("requesting server verification from",P());const t={payload:e};if(!1!==C()){const{blockedCountries:e,classifier:n,disableRules:r,email:o,expectedLanguages:i,expectedCountries:a,fields:l,ipAddress:s,text:u,timeZone:c}="ipAddress"===C()?{blockedCountries:void 0,classifier:void 0,disableRules:void 0,email:!1,expectedCountries:void 0,expectedLanguages:void 0,fields:!1,ipAddress:void 0,text:void 0,timeZone:void 0}:"object"==typeof C()?C():{blockedCountries:void 0,classifier:void 0,disableRules:void 0,email:void 0,expectedCountries:void 0,expectedLanguages:void 0,fields:void 0,ipAddress:void 0,text:void 0,timeZone:void 0};t.blockedCountries=e,t.classifier=n,t.disableRules=r,t.email=!1===o?void 0:function(e){var t;const n=null==ee?void 0:ee.querySelector("string"==typeof e?`input[name="${e}"]`:'input[type="email"]:not([data-no-spamfilter])');return(null==(t=null==n?void 0:n.value)?void 0:t.slice(n.value.indexOf("@")))||void 0}(o),t.expectedCountries=a,t.expectedLanguages=i||(j?[j]:void 0),t.fields=!1===l?void 0:function(e){return[...(null==ee?void 0:ee.querySelectorAll(null!=e&&e.length?e.map((e=>`input[name="${e}"]`)).join(", "):'input[type="text"]:not([data-no-spamfilter]), textarea:not([data-no-spamfilter])'))||[]].reduce(((e,t)=>{const n=t.name,r=t.value;return n&&r&&(e[n]=/\n/.test(r)?r.replace(new RegExp("(?<!\\r)\\n","g"),"\r\n"):r),e}),{})}(l),t.ipAddress=!1===s?void 0:s||"auto",t.text=u,t.timeZone=!1===c?void 0:c||Xo()}const n=await ue()(P(),{body:JSON.stringify(t),headers:{"content-type":"application/json"},method:"POST"});if(!(n&&n instanceof Response))throw new Error("Fetch function did not return a response.");if(200!==n.status)throw new Error(`Server responded with ${n.status}.`);const r=await n.json();if(null!=r&&r.payload&&D(ie,r.payload,!0),U("serververification",r),i()&&"BAD"===r.classification)throw new Error("SpamFilter returned negative classification.")}function xe(e){ce("expire",e),re&&(clearTimeout(re),re=null),e<1?le():re=setTimeout(le,e)}function Ee(e){ce("floating",e),v()!==e&&(c(B).style.left="",c(B).style.top=""),v(!0===e||""===e?"auto":!1===e||"false"===e?void 0:v()),v()?(o()||o("onsubmit"),document.addEventListener("scroll",de),document.addEventListener("click",fe),window.addEventListener("resize",me)):"onsubmit"===o()&&o(void 0)}function Re(e){if(!e.algorithm)throw new Error("Invalid challenge. Property algorithm is missing.");if(void 0===e.signature)throw new Error("Invalid challenge. Property signature is missing.");if(!O.includes(e.algorithm.toUpperCase()))throw new Error(`Unknown algorithm value. Allowed values: ${O.join(", ")}`);if(!e.challenge||e.challenge.length<40)throw new Error("Challenge is too short. Min. 40 chars.");if(!e.salt||e.salt.length<10)throw new Error("Salt is too short. Min. 10 chars.")}async function Ae(e){let t=null;if("Worker"in window){try{t=await async function(e,t=("number"==typeof S()?S():e.maxNumber||e.maxnumber||E()),n=Math.ceil(N())){const r=[];n=Math.min(16,t,Math.max(1,n));for(let e=0;e<n;e++)r.push(altchaCreateWorker(T()));const o=Math.ceil(t/n),i=await Promise.all(r.map(((t,n)=>{const i=n*o;return new Promise((n=>{t.addEventListener("message",(e=>{if(e.data)for(const e of r)e!==t&&e.postMessage({type:"abort"});n(e.data)})),t.postMessage({payload:e,max:i+o,start:i,type:"work"})}))})));for(const e of r)e.terminate();return i.find((e=>!!e))||null}(e,e.maxNumber||e.maxnumber||E())}catch(e){ce(e)}if(void 0!==(null==t?void 0:t.number)||"obfuscated"in e)return{data:e,solution:t}}if("obfuscated"in e){const t=await ta(e.obfuscated,e.key,e.maxNumber||e.maxnumber);return{data:e,solution:await t.promise}}return{data:e,solution:await zo(e.challenge,e.salt,e.algorithm,e.maxNumber||e.maxnumber||E()).promise}}async function _e(){if(!_())return void qe(b.ERROR);const e=oe.find((e=>"obfuscation"===e.constructor.pluginName));return e&&"clarify"in e?"clarify"in e&&"function"==typeof e.clarify?e.clarify():void 0:(qe(b.ERROR),void ce("Plugin `obfuscation` not found. Import `altcha/plugins/obfuscation` to load it."))}function Ie(e){void 0!==e.obfuscated&&_(e.obfuscated),void 0!==e.auto&&(o(e.auto),"onload"===o()&&(_()?_e():Ue())),void 0!==e.blockspam&&i(!!e.blockspam),void 0!==e.customfetch&&s(e.customfetch),void 0!==e.floatinganchor&&h(e.floatinganchor),void 0!==e.delay&&f(e.delay),void 0!==e.floatingoffset&&p(e.floatingoffset),void 0!==e.floating&&Ee(e.floating),void 0!==e.expire&&(xe(e.expire),d(e.expire)),e.challenge&&(l("string"==typeof e.challenge?e.challenge:JSON.stringify(e.challenge)),Re(c(W))),void 0!==e.challengeurl&&a(e.challengeurl),void 0!==e.debug&&u(!!e.debug),void 0!==e.hidefooter&&m(!!e.hidefooter),void 0!==e.hidelogo&&w(!!e.hidelogo),void 0!==e.maxnumber&&E(+e.maxnumber),void 0!==e.mockerror&&R(!!e.mockerror),void 0!==e.name&&x(e.name),void 0!==e.refetchonexpire&&I(!!e.refetchonexpire),void 0!==e.spamfilter&&C("object"==typeof e.spamfilter?e.spamfilter:!!e.spamfilter),e.strings&&L("string"==typeof e.strings?e.strings:JSON.stringify(e.strings)),void 0!==e.test&&S("number"==typeof e.test?e.test:!!e.test),void 0!==e.verifyurl&&P(e.verifyurl),void 0!==e.workers&&N(+e.workers),void 0!==e.workerurl&&T(e.workerurl)}function Ce(){return{auto:o(),blockspam:i(),challengeurl:a(),debug:u(),delay:f(),expire:d(),floating:v(),floatinganchor:h(),floatingoffset:p(),hidefooter:m(),hidelogo:w(),name:x(),maxnumber:E(),mockerror:R(),obfuscated:_(),refetchonexpire:I(),spamfilter:C(),strings:c(Z),test:S(),verifyurl:P(),workers:N(),workerurl:T()}}function Le(){return Y}function Se(){return c(K)}function De(){c(B).style.display="none"}function Ne(e=20){if(c(B))if(Y||(Y=(h()?document.querySelector(h()):null==ee?void 0:ee.querySelector('input[type="submit"], button[type="submit"], button:not([type="button"]):not([type="reset"])'))||ee),Y){const t=parseInt(p(),10)||12,n=Y.getBoundingClientRect(),r=c(B).getBoundingClientRect(),o=document.documentElement.clientHeight,i=document.documentElement.clientWidth,a="auto"===v()?n.bottom+r.height+t+e>o:"top"===v(),l=Math.max(e,Math.min(i-e-r.width,n.left+n.width/2-r.width/2));if(c(B).style.top=a?n.top-(r.height+t)+"px":`${n.bottom+t}px`,c(B).style.left=`${l}px`,c(B).setAttribute("data-floating",a?"top":"bottom"),c(Q)){const e=c(Q).getBoundingClientRect();c(Q).style.left=n.left-l+n.width/2-e.width/2+"px"}}else ce("unable to find floating anchor element")}function Te(e=b.UNVERIFIED,t=null){re&&(clearTimeout(re),re=null),D(H,!1),D(ie,null),qe(e,t)}function Oe(e){Y=e}function qe(e,t=null){D(K,e,!0),D(te,t,!0),U("statechange",{payload:c(ie),state:c(K)})}function Fe(){c(B).style.display="block",v()&&Ne()}async function Ue(){return Te(b.VERIFYING),await new Promise((e=>setTimeout(e,f()||0))),async function(){var e;if(R())throw ce("mocking error"),new Error("Mocked error.");if(c(W))return ce("using provided json data"),c(W);if(S())return ce("generating test challenge",{test:S()}),Ko("boolean"!=typeof S()?+S():void 0);{if(!a()&&ee){const e=ee.getAttribute("action");null!=e&&e.includes("/form/")&&a(e+"/altcha")}if(!a())throw new Error("Attribute challengeurl not set.");ce("fetching challenge from",a());const t={headers:!1!==C()?{"x-altcha-spam-filter":"1"}:{}},n=await ue()(a(),t);if(!(n&&n instanceof Response))throw new Error("Fetch function did not return a response.");if(200!==n.status)throw new Error(`Server responded with ${n.status}.`);const r=n.headers.get("X-Altcha-Config"),o=await n.json(),i=new URLSearchParams(null==(e=o.salt.split("?"))?void 0:e[1]),l=i.get("expires")||i.get("expire");if(l){const e=new Date(1e3*+l),t=isNaN(e.getTime())?0:e.getTime()-Date.now();t>0&&xe(t)}if(r)try{const e=JSON.parse(r);e&&"object"==typeof e&&("sentinel"in e?alert("This version of the widget is not compatible with Sentinel. Upgrade to version 2.x.x."):(e.verifyurl&&(e.verifyurl=new URL(e.verifyurl,new URL(a())).toString()),Ie(e)))}catch(e){ce("unable to configure from X-Altcha-Config",e)}return o}}().then((e=>(Re(e),ce("challenge",e),Ae(e)))).then((({data:e,solution:t})=>{if(ce("solution",t),!t||e&&"challenge"in e&&!("clearText"in t)){if(void 0===(null==t?void 0:t.number)||!("challenge"in e))throw ce("Unable to find a solution. Ensure that the 'maxnumber' attribute is greater than the randomly generated number."),new Error("Unexpected result returned.");if(P())return ye(ae(e,t));D(ie,ae(e,t),!0),ce("payload",c(ie))}})).then((()=>{qe(b.VERIFIED),ce("verified"),xo().then((()=>{U("verified",{payload:c(ie)})}))})).catch((e=>{ce(e),qe(b.ERROR,e.message)}))}Yt((()=>{!function(){for(const e of oe)"function"==typeof e.onErrorChange&&e.onErrorChange(c(te))}(c(te))})),Yt((()=>{!function(){for(const e of oe)"function"==typeof e.onStateChange&&e.onStateChange(c(K));v()&&c(K)!==b.UNVERIFIED&&requestAnimationFrame((()=>{Ne()})),D(H,c(K)===b.VERIFIED)}(c(K))})),qo((()=>{(function(){for(const e of oe)e.destroy()})(),ee&&(ee.removeEventListener("submit",he),ee.removeEventListener("reset",pe),ee.removeEventListener("focusin",ve),ee=null),re&&(clearTimeout(re),re=null),document.removeEventListener("click",fe),document.removeEventListener("scroll",de),window.removeEventListener("resize",me)})),ei((()=>{var e;ce("mounted","1.5.1"),ce("workers",N()),function(){const e=void 0!==k()?k().split(","):void 0;for(const t of globalThis.altchaPlugins)(!e||e.includes(t.pluginName))&&oe.push(new t({el:c(B),clarify:_e,dispatch:U,getConfiguration:Ce,getFloatingAnchor:Le,getState:Se,log:ce,reset:Te,solve:Ae,setState:qe,setFloatingAnchor:Oe,verify:Ue}))}(),ce("plugins",oe.length?oe.map((e=>e.constructor.pluginName)).join(", "):"none"),S()&&ce("using test mode"),d()&&xe(d()),void 0!==o()&&ce("auto",o()),void 0!==v()&&Ee(v()),ee=null==(e=c(B))?void 0:e.closest("form"),ee&&(ee.addEventListener("submit",he,{capture:!0}),ee.addEventListener("reset",pe),("onfocus"===o()||"focus"===g())&&ee.addEventListener("focusin",ve)),"onload"===o()&&(_()?_e():Ue()),c(M)&&(m()||w())&&ce("Attributes hidefooter and hidelogo ignored because usage with free API Keys requires attribution."),requestAnimationFrame((()=>{U("load")}))}));var je=da(),Me=Gr(je);Po(Me,t,"default",{});var We=we(Me,2),Ve=X(We),Ze=X(Ve),Je=e=>{ne(e,ra())};$e(Ze,(e=>{c(K)===b.VERIFYING&&e(Je)}));var ze=we(Ze,2);let He;var Ke=X(ze);en(Ke),Ke.__change=function(){[b.UNVERIFIED,b.ERROR,b.EXPIRED].includes(c(K))?!1!==C()&&!1===(null==ee?void 0:ee.reportValidity())?D(H,!1):_()?_e():Ue():D(H,!0)},z(ze);var Xe=we(ze,2),Be=X(Xe),Qe=e=>{var t=na(),n=Gr(t);Ge(X(n),(()=>c(Z).verified)),z(n);var r=we(n,2);en(r),Pe((()=>{se(r,"name",x()),jo(r,c(ie))})),ne(e,t)},Ye=(e,t)=>{var n=e=>{var t=ia();Ge(X(t),(()=>c(Z).verifying)),z(t),ne(e,t)},r=e=>{var t=oa();Ge(X(t),(()=>c(Z).label)),z(t),Pe((()=>se(t,"for",c(G)))),ne(e,t)};$e(e,(e=>{c(K)===b.VERIFYING?e(n):e(r,!1)}),t)};$e(Be,(e=>{c(K)===b.VERIFIED?e(Qe):e(Ye,!1)})),z(Xe);var et=we(Xe,2),tt=e=>{var t=aa(),n=X(t);se(n,"href",F),z(t),Pe((()=>se(n,"aria-label",c(Z).ariaLinkLabel))),ne(e,t)};$e(et,(e=>{(!0!==w()||c(M))&&e(tt)})),z(Ve);var nt=we(Ve,2),rt=e=>{var t=fa(),n=we(X(t),2),r=e=>{var t=la();Ge(X(t),(()=>c(Z).expired)),z(t),Pe((()=>se(t,"title",c(te)))),ne(e,t)},o=e=>{var t=sa();Ge(X(t),(()=>c(Z).error)),z(t),Pe((()=>se(t,"title",c(te)))),ne(e,t)};$e(n,(e=>{c(K)===b.EXPIRED?e(r):e(o,!1)})),z(t),ne(e,t)};$e(nt,(e=>{(c(te)||c(K)===b.EXPIRED)&&e(rt)}));var ot=we(nt,2),it=e=>{var t=ua(),n=X(t);Ge(X(n),(()=>c(Z).footer)),z(n),z(t),ne(e,t)};$e(ot,(e=>{c(Z).footer&&(!0!==m()||c(M))&&e(it)}));var at=we(ot,2),lt=e=>{var t=ca();nn(t,(e=>D(Q,e)),(()=>c(Q))),ne(e,t)};return $e(at,(e=>{v()&&e(lt)})),z(We),nn(We,(e=>D(B,e)),(()=>c(B))),Pe((e=>{se(We,"data-state",c(K)),se(We,"data-floating",v()),He=Fo(ze,1,"altcha-checkbox",null,He,e),se(Ke,"id",c(G)),Ke.required="onsubmit"!==o()&&(!v()||"off"!==o())}),[()=>({"altcha-hidden":c(K)===b.VERIFYING})]),So("invalid",Ke,ge),Bo(Ke,(()=>c(H)),(e=>D(H,e))),ne(e,je),Yn({clarify:_e,configure:Ie,getConfiguration:Ce,getFloatingAnchor:Le,getPlugin:function(e){return oe.find((t=>t.constructor.pluginName===e))},getState:Se,hide:De,repositionFloating:Ne,reset:Te,setFloatingAnchor:Oe,setState:qe,show:Fe,verify:Ue,get auto(){return o()},set auto(e=void 0){o(e),$()},get blockspam(){return i()},set blockspam(e=void 0){i(e),$()},get challengeurl(){return a()},set challengeurl(e=void 0){a(e),$()},get challengejson(){return l()},set challengejson(e=void 0){l(e),$()},get customfetch(){return s()},set customfetch(e=void 0){s(e),$()},get debug(){return u()},set debug(e=!1){u(e),$()},get delay(){return f()},set delay(e=0){f(e),$()},get expire(){return d()},set expire(e=void 0){d(e),$()},get floating(){return v()},set floating(e=void 0){v(e),$()},get floatinganchor(){return h()},set floatinganchor(e=void 0){h(e),$()},get floatingoffset(){return p()},set floatingoffset(e=void 0){p(e),$()},get floatingpersist(){return g()},set floatingpersist(e=!1){g(e),$()},get hidefooter(){return m()},set hidefooter(e=!1){m(e),$()},get hidelogo(){return w()},set hidelogo(e=!1){w(e),$()},get id(){return y()},set id(e=void 0){y(e),$()},get name(){return x()},set name(e="altcha"){x(e),$()},get maxnumber(){return E()},set maxnumber(e=1e6){E(e),$()},get mockerror(){return R()},set mockerror(e=!1){R(e),$()},get obfuscated(){return _()},set obfuscated(e=void 0){_(e),$()},get plugins(){return k()},set plugins(e=void 0){k(e),$()},get refetchonexpire(){return I()},set refetchonexpire(e=!0){I(e),$()},get spamfilter(){return C()},set spamfilter(e=!1){C(e),$()},get strings(){return L()},set strings(e=void 0){L(e),$()},get test(){return S()},set test(e=!1){S(e),$()},get verifyurl(){return P()},set verifyurl(e=void 0){P(e),$()},get workers(){return N()},set workers(e=Math.min(16,navigator.hardwareConcurrency||8)){N(e),$()},get workerurl(){return T()},set workerurl(e=void 0){T(e),$()}})}To(["change"]),customElements.define("altcha-widget",Zo(ha,{blockspam:{type:"Boolean"},debug:{type:"Boolean"},delay:{type:"Number"},expire:{type:"Number"},floatingoffset:{type:"Number"},hidefooter:{type:"Boolean"},hidelogo:{type:"Boolean"},maxnumber:{type:"Number"},mockerror:{type:"Boolean"},refetchonexpire:{type:"Boolean"},test:{type:"Boolean"},workers:{type:"Number"},auto:{},challengeurl:{},challengejson:{},customfetch:{},floating:{},floatinganchor:{},floatingpersist:{},id:{},name:{},obfuscated:{},plugins:{},spamfilter:{},strings:{},verifyurl:{},workerurl:{}},["default"],["clarify","configure","getConfiguration","getFloatingAnchor","getPlugin","getState","hide","repositionFloating","reset","setFloatingAnchor","setState","show","verify"],!1));const va='@keyframes altcha-spinner{to{transform:rotate(360deg)}}.altcha{background:var(--altcha-color-base, transparent);border:var(--altcha-border-width, 1px) solid var(--altcha-color-border, #a0a0a0);border-radius:var(--altcha-border-radius, 3px);color:var(--altcha-color-text, currentColor);display:flex;flex-direction:column;max-width:var(--altcha-max-width, 260px);position:relative;text-align:left}.altcha:focus-within{border-color:var(--altcha-color-border-focus, currentColor)}.altcha[data-floating]{background:var(--altcha-color-base, white);display:none;filter:drop-shadow(3px 3px 6px rgba(0,0,0,.2));left:-100%;position:fixed;top:-100%;width:var(--altcha-max-width, 260px);z-index:999999}.altcha[data-floating=top] .altcha-anchor-arrow{border-bottom-color:transparent;border-top-color:var(--altcha-color-border, #a0a0a0);bottom:-12px;top:auto}.altcha[data-floating=bottom]:focus-within::after{border-bottom-color:var(--altcha-color-border-focus, currentColor)}.altcha[data-floating=top]:focus-within::after{border-top-color:var(--altcha-color-border-focus, currentColor)}.altcha[data-floating]:not([data-state=unverified]){display:block}.altcha-anchor-arrow{border:6px solid transparent;border-bottom-color:var(--altcha-color-border, #a0a0a0);content:"";height:0;left:12px;position:absolute;top:-12px;width:0}.altcha-main{align-items:center;display:flex;gap:.4rem;padding:.7rem}.altcha-label{flex-grow:1}.altcha-label label{cursor:pointer}.altcha-logo{color:currentColor;opacity:.3}.altcha-footer:hover,.altcha-logo:hover{opacity:1}.altcha-error{color:var(--altcha-color-error-text, #f23939);display:flex;font-size:.85rem;gap:.3rem;padding:0 .7rem .7rem}.altcha-footer{align-items:center;background-color:var(--altcha-color-footer-bg, transparent);display:flex;font-size:.75rem;opacity:.4;padding:.2rem .7rem;text-align:right}.altcha-footer>:first-child{flex-grow:1}.altcha-footer a{color:currentColor}.altcha-checkbox{display:flex;align-items:center;height:24px;width:24px}.altcha-checkbox input{width:18px;height:18px;margin:0}.altcha-hidden{display:none}.altcha-spinner{animation:altcha-spinner .75s infinite linear;transform-origin:center}';function ga(e,t="__altcha-css"){if(!document.getElementById(t)){const n=document.createElement("style");n.id=t,n.textContent=e,document.head.appendChild(n)}}globalThis.altchaCreateWorker=e=>e?new Worker(new URL(e)):new Si,globalThis.altchaPlugins=globalThis.altchaPlugins||[],ga(va);export{ha as Altcha};
//# sourceMappingURL=/sm/f53b54ff873883eb30a6f5def83618d83a449d52c23ba83bb3d60c9f45fdae35.map